<!DOCTYPE html>
<html lang="en">
<head>
    <!-- head -->
    <script src="../../html/include/head.js"></script>
    <!-- // head -->
    
    <title>board</title>
</head>
<body data-theme="light">

<!-- code_wrap -->
<div class="">

    <style type="text/css">
        body {background:#f1f1f1;font-family:'Nanum Gothic';}
        #header {position:relative;z-index:0;height:100px;background:red;}
        #footer {position:relative;z-index:0;height:100px;background:red;}
        #container {position:relative;z-index:1;width:1200px;margin:0 auto;padding:50px 0;}
        .inner {padding:20px;}
        .goodsView {position:relative;z-index:0;width:900px;padding-right:300px;}
        .goodsInformation {width:900px;min-height:2000px;background:#999;}
        .goodsBar {position:absolute;z-index:0;left:900px;top:0;width:300px;background:#fff;transition:height 0.25s;}
        .goodsBar.fixed {position:fixed;left:50%;top:0;}
        .goodsTop {border-bottom:1px solid #f1f1f1;background:#fff;}
        .goodsMiddle {background:#fff;}
        .goodsMiddle .goodsSelect {min-height:100px;overflow-y:auto;background:#f1f1f1;transition:height 0.25s;}
        .goodsBottom {border-top:1px solid #f1f1f1;background:#fff;}
    </style>
    <div id="wrap">
        <div id="header"></div>
        <div id="container">
            <div class="contents">
                <div class="goodsView">
                    <div class="goodsInformation"></div>
                    <div class="goodsBar">
                        <div class="goodsTop">
                            <div class="inner">
                                상단내용<br />
                                상단내용<br />
                                상단내용<br />
                                상단내용<br />
                                상단내용<br />
                                상단내용
                            </div>
                        </div>
                        <div class="goodsMiddle">
                            <div class="goodsSelect">
                                <div class="inner">
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택<br />
                                    상품선택
                                </div>
                            </div>
                        </div>
                        <div class="goodsBottom">
                            <div class="inner">
                                하단내용<br />
                                하단내용<br />
                                하단내용<br />
                                하단내용<br />
                                하단내용<br />
                                하단내용
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="footer"></div>
    </div>
    <script type="text/javascript">
        class GoodsBar {
            constructor() {
                this.goodsBar = document.querySelector('.goodsBar');
                this.goodsTop = this.goodsBar.querySelector('.goodsTop');
                this.goodsMiddle = this.goodsBar.querySelector('.goodsMiddle');
                this.goodsSelect = this.goodsMiddle.querySelector('.goodsSelect');
                this.goodsBottom = this.goodsBar.querySelector('.goodsBottom');
                this.containerPadding = 50; // 패딩 값 설정
                this.init();
                this.bindEvents();
            }

            init() {
                this.updateStyles();
            }

            bindEvents() {
                window.addEventListener('load', this.updateStyles.bind(this));
                window.addEventListener('resize', this.updateStyles.bind(this));
                window.addEventListener('scroll', this.updateStyles.bind(this));
            }

            updateStyles() {
                const win_h = window.innerHeight;
                const win_s = window.scrollY;
                const contents_t = document.querySelector('.contents').offsetTop;
                const header_h = document.getElementById('header').offsetHeight;
                const footer_h = document.getElementById('footer').offsetHeight;

                const goods_w = this.goodsBar.offsetWidth;
                const goodsTop_h = this.goodsTop.offsetHeight;
                const goodsBottom_h = this.goodsBottom.offsetHeight;

                let select_h;
                let gap;
                
                if (win_h > 640) {
                    if (win_s < header_h + contents_t) {
                        select_h = win_h - header_h - this.containerPadding - goodsTop_h - goodsBottom_h;
                        this.goodsBar.classList.remove('fixed');
                        this.goodsBar.style.marginLeft = `0px`;
                        this.goodsBar.style.height = `${win_h - contents_t}px`;
                        this.goodsSelect.style.height = `${select_h}px`;
                    } else {
                        select_h = win_h - goodsTop_h - goodsBottom_h;
                        this.goodsBar.classList.add('fixed');
                        this.goodsBar.style.marginLeft = `${goods_w}px`;
                        this.goodsBar.style.height = `${win_h}px`;
                        this.goodsSelect.style.height = `${select_h}px`;

                        if (win_s + win_h >= document.body.scrollHeight - footer_h) {
                            select_h = win_h - goodsTop_h - goodsBottom_h - this.containerPadding - footer_h;
                            gap = Math.max(100 - select_h, 0);
                            this.goodsSelect.style.height = `${select_h}px`;
                            this.goodsBar.style.height = `${win_h - (footer_h - (document.body.scrollHeight - win_h - win_s)) + gap - this.containerPadding}px`;
                            this.goodsBar.style.marginTop = `-${gap}px`;
                        }
                    }
                } else {
                    this.goodsSelect.style.height = 'auto';
                }
            }
        }

        // Initialize GoodsBar
        new GoodsBar();
    </script>

</div>
<!-- // code_wrap -->

<script type="text/javascript" src="../../../common/js/code.js"></script>
</body>
</html>
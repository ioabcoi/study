<!DOCTYPE html>
<html lang="en">
<head>
    <!-- head -->
    <script src="../include/head.js"></script>
    <!-- // head -->
    
    <title>dragdrop</title>
</head>
<body data-theme="light">

    <!-- code_wrap -->
    <div class="code_wrap">
        <h1>dragdrop</h1>

        <!-- code_area -->
        <div class="code_tit">description</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">

<!-- ì¶œì²˜ : https://inpa.tistory.com/entry/ë“œë˜ê·¸-ì•¤-ë“œë¡­-Drag-Drop-ê¸°ëŠ¥ -->
<!-- 
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dragstart_event
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/drag_event 
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dragenter_event
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dragover_event
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dragleave_event
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/drop_event
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dragend_event


<a>ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë“œë˜ê·¸ ê°€ëŠ¥


dragstart   1. ì‚¬ìš©ìê°€ ê°ì²´(object)ë¥¼ ë“œë˜ê·¸í•˜ë ¤ê³  ì‹œì‘í•  ë•Œ ë°œìƒí•¨.
            ë“œë˜ê·¸ê°€ ì‹œì‘ë˜ëŠ” ìˆœê°„ ë°œìƒ

drag        2. ëŒ€ìƒ ê°ì²´ë¥¼ ë“œë˜ê·¸í•˜ë©´ì„œ ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì¼ ë•Œ ë°œìƒí•¨.
            ìš”ì†Œë¥¼ ë“œë˜ê·¸í•  ë•Œ ë°œìƒ

dragenter   3. ë§ˆìš°ìŠ¤ê°€ ëŒ€ìƒ ê°ì²´ì˜ ìœ„ë¡œ ì²˜ìŒ ì§„ì…í•  ë•Œ ë°œìƒí•¨.
            í•´ë‹¹ ì´ë²¤íŠ¸ë¥¼ ì§€ì •í•œ ìš”ì†Œì— ë“œë˜ê·¸í•œ ì•„ì´í…œì´ ë“¤ì–´ê°€ë©´ ë°œìƒ
            ë“œë˜ê·¸í•˜ëŠ” ìš”ì†Œê°€ dragenter ì´ë²¤íŠ¸ë¥¼ ë‹¬ì•„ë†“ì€ ìš”ì†Œ ì•ˆì— ì§„ì…í–ˆì„ ë•Œ ë°œìƒ

dragover    4. ë“œë˜ê·¸í•˜ë©´ì„œ ë§ˆìš°ìŠ¤ê°€ ëŒ€ìƒ ê°ì²´ì˜ ì˜ì—­ ìœ„ì— ìë¦¬ ì¡ê³  ìˆì„ ë•Œ ë°œìƒí•¨.
            ì´ ì´ë²¤íŠ¸ê°€ ë‹¬ë¦° ì˜ì—­ ìœ„ì— ë“œë˜ê·¸ ìš”ì†Œê°€ ìˆìœ¼ë©´ ë°œìƒ

drop        5. ë“œë˜ê·¸ê°€ ëë‚˜ì„œ ë“œë˜ê·¸í•˜ë˜ ê°ì²´ë¥¼ ë†“ëŠ” ì¥ì†Œì— ìœ„ì¹˜í•œ ê°ì²´ì—ì„œ ë°œìƒí•¨. ë¦¬ìŠ¤ë„ˆëŠ” ë“œë˜ê·¸ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ë“œë¡­ ìœ„ì¹˜ì— ë†“ëŠ” ì—­í• ì„ í•¨
            ì´ ì´ë²¤íŠ¸ê°€ ë‹¬ë¦° ìš”ì†Œì— ë“œë˜ê·¸ë¥¼ ëë‚´ë©´ ë°œìƒ (dragoverë‘ ê°™ì´ ì¨ì•¼í•¨)
            drop ì´ë²¤íŠ¸ ì—­ì‹œ ë“œë¡­ë  ìš”ì†Œì—ëŠ” e.preventDefault()ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì •ìƒì ì¸ ë™ì‘ì´ ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œì´ë²¤íŠ¸ì—Â preventDefault()Â ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
            ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©í–ˆì„ ë•ŒëŠ” ë™ì‘ì„ í•˜ì§€ ì•Šì•˜ê³  dragoverì´ë²¤íŠ¸ì™€ í•¨ê»˜ ì‚¬ìš©í–ˆì„ ë•Œ ë¹„ë¡œì†Œ ë™ì‘ì´ ëœë‹¤.

dragleave   6. ë“œë˜ê·¸ê°€ ëë‚˜ì„œ ë§ˆìš°ìŠ¤ê°€ ëŒ€ìƒ ê°ì²´ì˜ ìœ„ì—ì„œ ë²—ì–´ë‚  ë•Œ ë°œìƒí•¨.
            dragexit ì´ë²¤íŠ¸ ëŒ€ì‹  ì‚¬ìš©.
            ì–´ë–¤ ìš”ì†Œë“  ë“œë˜ê·¸ë˜ê³  ìˆë‹¤ë©´ ì´ ì´ë²¤íŠ¸ê°€ ë‹¬ë¦° ìš”ì†Œì— ë“¤ì–´ê°”ë‹¤ê°€ ë‚˜ê°€ëŠ” ì‹œì ì— ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸
            dragenter ì´ë²¤íŠ¸ì™€ ë™ì‘ì´ ê²¹ì¹ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— e.preventDefault() ë¡œ ì œí•œí•˜ë©° ë‘˜ì´ ê²°í•©í•˜ì—¬ ì‚¬ìš©í•¨

dragend     7. ëŒ€ìƒ ê°ì²´ë¥¼ ë“œë˜ê·¸í•˜ë‹¤ê°€ ë§ˆìš°ìŠ¤ ë²„íŠ¼ì„ ë†“ëŠ” ìˆœê°„ ë°œìƒí•¨.
            ìš”ì†Œì˜ ë“œë˜ê·¸ê°€ ëë‚ ë•Œ ë°œìƒ(ë“œë˜ê·¸ ë„ì¤‘ì— ë§ˆìš°ìŠ¤ ë²„íŠ¼ì„ ì•„ë¬´ë°ë‚˜ ë†“ìœ¼ë©´)

drop, dragover ì´ë²¤íŠ¸ëŠ” í•„ìˆ˜ë¡œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ë²¤íŠ¸
dragover ì´ë²¤íŠ¸ë¥¼ ì ìš©í•˜ì§€ ì•Šìœ¼ë©´ drop ì´ë²¤íŠ¸ê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ

ê¸°ë³¸ì ìœ¼ë¡œ HTML ìš”ì†ŒëŠ” ë‹¤ë¥¸ ìš”ì†Œì˜ ìœ„ì— ìœ„ì¹˜í•  ìˆ˜ ì—†ë‹¤. 
ë”°ë¼ì„œ ë‹¤ë¥¸ ìš”ì†Œ ìœ„ì— ìœ„ì¹˜í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë†“ì¼ ì¥ì†Œì— ìˆëŠ” ìš”ì†Œì˜ ê¸°ë³¸ ë™ì‘ì„ ë§‰ì•„ì•¼ë§Œ í•œë‹¤. 
ì´ ì‘ì—…ì„ event.preventDefault() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ê°„ë‹¨íˆ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.


DataTransfer ê°ì²´
ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ë²¤íŠ¸ë¥¼ ìœ„í•œ ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë©”ì†Œë“œ(event listener method)ëŠ”Â DataTransfer ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
ì´ë ‡ê²Œ ë°˜í™˜ëœ DataTransfer ê°ì²´ëŠ”Â ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë™ì‘ì— ê´€í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë‹¤.Â 
event.dataTransfer
ë°ì´í„°ë¥¼ ì €ì¥ ë° ê°€ì ¸ì˜¤ê¸°, ì‚­ì œë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” í‘œì¤€ ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤.

event.dataTransfer.setData(format,data)
ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ í¬ë§· ë¬¸ìì—´ì„ ì§€ì •.
ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì— ì§€ì •í•œ í¬ë§·ê³¼ ì¼ì¹˜í•˜ëŠ” ê°’ì„ ë‘ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ì§€ì •.
ë‘ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œëŠ” ë¬¸ìì—´ë§Œ ì§€ì • ê°€ëŠ¥

event.dataTransfer.getData(format)
ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì— ì§€ì •í•œ í¬ë§·ì˜ ì „ì†¡ ë°ì´í„°ë¥¼ ë°˜í™˜.
ì§€ì •ëœ í¬ë§·ì˜ ë°ì´í„°ê°€ ì§€ì •ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ ê³µë°± ë¬¸ìì—´ì„ ë°˜í™˜

event.dataTransfer.clearData()
event.dataTransfer.clearData(format)
ë°ì´í„° ì „ì†¡ìš©ìœ¼ë¡œ ì§€ì •ëœ ë°ì´í„°ë¥¼ ëª¨ë‘ ì œê±°.
ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ í¬ë§· ë¬¸ìì—´ì„ ì§€ì •í•˜ë©´ í•´ë‹¹ í˜•ì‹ê³¼ ì¼ì¹˜í•˜ëŠ” ë°ì´í„°ë§Œì„ ì œê±°.

event.dataTransfer.types
dragstartÂ ì´ë²¤íŠ¸ ë°œìƒì‹œÂ DOMÂ ëª©ë¡ì— ìˆëŠ”Â data formatÂ ì„ ì„¤ì •í•˜ë©°
setDataÂ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí• ë•Œ ì§€ì •ë˜ëŠ”Â formatÂ ë¬¸ìì—´ì„ ë°°ì—´í˜•ì‹ìœ¼ë¡œ ì–»ì„ ìˆ˜ ìˆë‹¤.


ìš”ì†Œë¥¼ ë§ˆìš°ìŠ¤ë¡œ ë“œë˜ê·¸í•˜ë©´ ê·¸ ìš”ì†Œì˜ ëª¨ìŠµì´ ê³ ìŠ¤íŠ¸ ì´ë¯¸ì§€(ghost image) ë¡œì„œ ì»¤ì„œì— ë”¸ë ¤ ë‚˜ì˜¨ë‹¤. 
ì´ ë“œë˜ê·¸ ì´ë¯¸ì§€ë¥¼ DataTransfer.setDragImage() ë©”ì„œë“œë¥¼ í†µí•´ ì‚¬ìš©ì ì»¤ìŠ¤í…€ì´ ê°€ëŠ¥í•˜ë‹¤.
-->
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

        <!-- code_area -->
        <div class="code_tit">drag_drop</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">
<style type="text/css">
    .drag_drop {overflow:hidden;width:100%;height:600px;background:#eee;user-select:none;}
    .drag_drop .item {width:200px;height:50px;background:#f0f;border:0;}
    .drag_drop .item.dragging {background:#f00;}
    .drag_drop .drag_box {display:flex;align-items:center;justify-content:center;width:500px;height:200px;background:#0ff;}
    .drag_drop .drag_box.dragover {background:#00f;}
    .drag_drop .drop_box {display:flex;align-items:center;justify-content:center;width:500px;height:300px;background:#ff0;}
    .drag_drop .drop_box.dragover {background:#0f0;}
</style>
<div class="drag_drop">
    <div class="drag_box">
        drag_box
        <button class="item image" draggable="true">item</button><!-- ë“œë˜ê·¸ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ìš”ì†Œì— draggable="true" ì¶”ê°€ -->
    </div>
    <div class="drop_box">
        drop_box
    </div>
</div>
<script type='text/javascript'>
    // item
    const item = document.querySelector('.drag_box .item');
    item.addEventListener('dragstart', (e) => {
        // e.preventDefault();
        e.target.classList.add("dragging");
        // console.log('ìš”ì†Œë¥¼ ë“œë˜ê·¸ë¥¼ ì‹œì‘í•˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');

        if (e.target.classList.contains('image')) {
            const img = document.createElement("img");
            img.src = "../../images/snoopy.png";
            // setDragImage(ì´ë¯¸ì§€ìš”ì†Œ, xOffset, yOffset)
            e.dataTransfer.setDragImage(img, 60, 80); // ì‚¬ìš©í•  ì‚¬ìš©ì ì •ì˜ ì´ë¯¸ì§€ë¥¼ ì„¤ì •
            // console.log('image');
        }
    }, false);
    item.addEventListener('drag', (e) => {
        // console.log(e.dataTransfer); // ë“œë˜ê·¸ ì´ë²¤íŠ¸ ì •ë³´ë¥¼ ë‹´ê³ ìˆëŠ” dataTransfer ê°ì²´
        // console.log('ë“œë˜ê·¸í•˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });
    item.addEventListener('dragend', (e) => {
        e.target.classList.remove("dragging");
        // console.log('ë“œë˜ê·¸ê°€ ëë‚˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });

    // dragBox, dropBox
    const dragBox = document.querySelector('.drag_drop .drag_box');
    const dropBox = document.querySelector('.drag_drop .drop_box');

    // dragBox
    dragBox.addEventListener('dragenter', (e) => {
        e.preventDefault();
        e.target.classList.add("dragover");
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drag_box ì˜ì—­ì— ë‹¿ìœ¼ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });
    dragBox.addEventListener('dragleave', (e) => {
        e.preventDefault();
        e.target.classList.remove("dragover");
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drag_box ì˜ì—­ì„ ë– ë‚˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });
    dragBox.addEventListener('dragover', (e) => {
        e.preventDefault();
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drag_box ì˜ì—­ì— ê³„ì† ìœ„ì¹˜í•˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });
    dragBox.addEventListener('drop', (e) => {
        e.preventDefault();
        if (!e.target.classList.contains('item') ) {
            dropBox.removeChild(item);
            e.target.appendChild(item);
        }        
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drag_box ì˜ì—­ì— ë“œë¡­');
    });

    // dropBox
    dropBox.addEventListener('dragenter', (e) => {
        e.target.classList.add("dragover");
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drop_box ì˜ì—­ì— ë‹¿ìœ¼ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });
    dropBox.addEventListener('dragleave', (e) => {
        e.preventDefault();
        e.target.classList.remove("dragover");
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drop_box ì˜ì—­ì„ ë– ë‚˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });
    dropBox.addEventListener('dragover', (e) => {
        e.preventDefault();
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drop_box ì˜ì—­ì— ê³„ì† ìœ„ì¹˜í•˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });
    dropBox.addEventListener('drop', (e) => {
        e.preventDefault();
        if (!e.target.classList.contains('item') ) {
            dragBox.removeChild(item);
            e.target.appendChild(item);
        }
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drop_box ì˜ì—­ì— ë“œë¡­');
    });
</script>
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

        <!-- code_area -->
        <div class="code_tit">attach File</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">
<style type="text/css">
    .attach_file {position:relative;width:100%;height:200px;overflow:auto;display:flex;justify-content:center;align-items:center;flex-direction:column;border-radius:5px;border:4px dashed #ddd;text-align:center;user-select:none;transition:0.4s;}
    .attach_file .tit {position:absolute;left:0;top:50%;width:100%;font-size:20px;font-weight:600;transform:translateY(-50%);}
    .attach_file .file {position:relative;z-index:1;width:100%;height:100%;overflow-y:auto;padding:10px;font-size:12px;}
    .attach_file.active {background:#ddd;} /* ë“œë¡­ ë°˜ì‘ */
</style>
<div class="attach_file">
    <strong class="tit">ì´ê³³ì— íŒŒì¼ì„ (ì—¬ëŸ¬ê°œ) ë“œë¡­í•´ì£¼ì„¸ìš”. </strong>
    <div class="file"></div>
</div>
<script type='text/javascript'>
const $drop = document.querySelector(".attach_file");
const $title = document.querySelector(".attach_file .tit");
const $file = document.querySelector(".attach_file .file");

// ë“œë˜ê·¸í•œ íŒŒì¼ ê°ì²´ê°€ í•´ë‹¹ ì˜ì—­ì— ë†“ì˜€ì„ ë•Œ
$drop.ondrop = (e) => {
    e.preventDefault();
    $drop.className = "attach_file";

    // íŒŒì¼ ë¦¬ìŠ¤íŠ¸
    const files = [...e.dataTransfer?.files];
    // console.log(files);

    // $title.innerHTML = files.map(file => file.name).join("<br>");
    $title.remove();
    $file.innerHTML = files.map(file => file.name).join("<br>");
}

// ondragover ì´ë²¤íŠ¸ê°€ ì—†ìœ¼ë©´ onDrop ì´ë²¤íŠ¸ê°€ ì‹¤í•»ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
$drop.ondragover = (e) => {
    e.preventDefault();
}

// ë“œë˜ê·¸í•œ íŒŒì¼ì´ ìµœì´ˆë¡œ ì§„ì…í–ˆì„ ë•Œ
$drop.ondragenter = (e) => {
    e.preventDefault();

$drop.classList.add("active");
}

// ë“œë˜ê·¸í•œ íŒŒì¼ì´ ì˜ì—­ì„ ë²—ì–´ë‚¬ì„ ë•Œ
$drop.ondragleave = (e) => {
    e.preventDefault();

    $drop.classList.remove("active");
}
</script>
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

        <!-- code_area -->
        <div class="code_tit">ex</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">
<!-- 
dragstart ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ì—ì„œÂ e.dataTransfer.setDataë¡œ ì „ë‹¬í•  ë°ì´í„°ë¥¼ ì§€ì •í•´ì¤€ë‹¤.Â 
setDataëŠ” í‚¤-ê°’ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê¸° ë•Œë¬¸ì—, í‚¤ë§Œ ë‹¤ë¥´ë©´ ì—¬ëŸ¬ ê°œì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
dragoverì´ë²¤íŠ¸ì—ì„œëŠ”Â e.preventDefault()ë¡œ drop ì´ë²¤íŠ¸ê°€ í˜¸ì¶œë  ìˆ˜ ìˆê²Œ í•´ì£¼ê³ 
drop ì´ë²¤íŠ¸ì—ì„œÂ e.dataTransfer.getDataë¡œ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.
-->
<style type="text/css">
    #drag {padding:20px;background:#eee;font-size:20px;}
    #drop {padding:20px;background:#999;font-size:20px;}
</style>
<div>
    <p id="drag" draggable="true">ë“œë˜ê·¸í•´ë³´ì„¸ìš”.</p>
    <div id="drop">ì—¬ê¸°ì— ë“œë¡­í•˜ì„¸ìš”</div>
</div>
<script type='text/javascript'>
    document.getElementById('drag').ondragstart = function(e) {
        console.log('ë“œë˜ê·¸ ì‹œì‘');
        e.dataTransfer.setData('data', this.innerHTML);
        e.dataTransfer.dropEffect = 'copy';
    };
    var drop = document.getElementById('drop');
    drop.ondragover = function(e) {
        e.preventDefault(); // í•„ìˆ˜
        console.log('ë¬´ì–¸ê°€ ìœ„ì— ì˜¬ë ¤ì ¸ ìˆìŠµë‹ˆë‹¤');
        e.dataTransfer.dropEffect = 'move';
    };
    drop.ondrop = function(e) {
        console.log('ë¬´ì–¸ê°€ ë“œë¡­ë˜ì—ˆìŠµë‹ˆë‹¤.');
        alert(e.dataTransfer.getData('data'));
    }
</script>
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

        <!-- code_area -->
        <div class="code_tit">ex</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">
<!-- 
dragstart ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ì—ì„œÂ e.dataTransfer.setDataë¡œ ì „ë‹¬í•  ë°ì´í„°ë¥¼ ì§€ì •í•´ì¤€ë‹¤.Â 
setDataëŠ” í‚¤-ê°’ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê¸° ë•Œë¬¸ì—, í‚¤ë§Œ ë‹¤ë¥´ë©´ ì—¬ëŸ¬ ê°œì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
dragoverì´ë²¤íŠ¸ì—ì„œëŠ”Â e.preventDefault()ë¡œ drop ì´ë²¤íŠ¸ê°€ í˜¸ì¶œë  ìˆ˜ ìˆê²Œ í•´ì£¼ê³ 
drop ì´ë²¤íŠ¸ì—ì„œÂ e.dataTransfer.getDataë¡œ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.
-->
<style type="text/css">
    .container {height:120px;margin:10px;padding:10px;background-color:green;border-radius:8px;}
    .container button {width:70px;height:70px;border:none;border-radius:8px;margin:12px;cursor:move;font-size:30px;background:#eaeaea4f;}
    .container .draggable.dragging {opacity:0.5;}
</style>
<div class="container">
    <button class="draggable" draggable="true">ğŸ¦Š</button>
    <button class="draggable" draggable="true">ğŸ¸</button>
</div>
<div class="container">
    <button class="draggable" draggable="true">ğŸ¶</button>
    <button class="draggable" draggable="true">ğŸ±</button>
</div>
<script type='text/javascript'>
const draggables = document.querySelectorAll(".draggable");
const containers = document.querySelectorAll(".container");

draggables.forEach(draggable => {
    draggable.addEventListener("dragstart", () => {
        draggable.classList.add("dragging");
    });

    draggable.addEventListener("dragend", () => {
        draggable.classList.remove("dragging");
    });
});

containers.forEach(container => {
    container.addEventListener("dragover", e => {
        e.preventDefault();
        const afterElement = getDragAfterElement(container, e.clientX);
        const draggable = document.querySelector(".dragging");
        if (afterElement === undefined) {
            container.appendChild(draggable);
        } else {
            container.insertBefore(draggable, afterElement);
        }
    });
});

function getDragAfterElement(container, x) {
    const draggableElements = [
        ...container.querySelectorAll(".draggable:not(.dragging)"),
    ];

    return draggableElements.reduce(
        (closest, child) => {
            const box = child.getBoundingClientRect();
            const offset = x - box.left - box.width / 2;
            // console.log(offset);
            if (offset < 0 && offset > closest.offset) {
                return { offset: offset, element: child };
            } else {
                return closest;
            }
        },
        { offset: Number.NEGATIVE_INFINITY },
    ).element;
}
</script>
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

        <!-- code_area -->
        <div class="code_tit">ex</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">
<!-- 
dragstart ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ì—ì„œÂ e.dataTransfer.setDataë¡œ ì „ë‹¬í•  ë°ì´í„°ë¥¼ ì§€ì •í•´ì¤€ë‹¤.Â 
setDataëŠ” í‚¤-ê°’ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê¸° ë•Œë¬¸ì—, í‚¤ë§Œ ë‹¤ë¥´ë©´ ì—¬ëŸ¬ ê°œì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
dragoverì´ë²¤íŠ¸ì—ì„œëŠ”Â e.preventDefault()ë¡œ drop ì´ë²¤íŠ¸ê°€ í˜¸ì¶œë  ìˆ˜ ìˆê²Œ í•´ì£¼ê³ 
drop ì´ë²¤íŠ¸ì—ì„œÂ e.dataTransfer.getDataë¡œ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.
-->
<style type="text/css">
    .ico_container {padding:20px;background:#f1f1f1;border:1px solid #ccc;}
    .ico_container .draggable {display:flex;justify-content:center;align-items:center;height:40px;background:#f7f7f7;border:1px solid #ccc;font-size:20px;line-height:40px;cursor:move;}
    .ico_container .draggable + .draggable {margin-top:-1px;}
    .ico_container .draggable.dragging {opacity:.5;border:2px dashed red;}
    .ico_container + .ico_container {margin-top:10px;}
</style>
<div class="ico_container">
    <div class="draggable" draggable="true">
        <span class="ico-drag"></span>
        <div class="el">HTML</div>
    </div>
    <div class="draggable" draggable="true">
        <span class="ico-drag"></span>    
        <div class="el">CSS</div>
    </div>
    <div class="draggable" draggable="true">
        <span class="ico-drag"></span>
        <div class="el">JavaScript</div>
    </div>
</div>
<div class="ico_container">
    <div class="draggable" draggable="true">
        <span class="ico-drag"></span>
        <div class="el">React</div>
    </div>
    <div class="draggable" draggable="true">
        <span class="ico-drag"></span>
        <div class="el">Vue</div>
    </div>
    <div class="draggable" draggable="true">
        <span class="ico-drag"></span>
        <div class="el">Next JS</div>
    </div>
</div>
<script type='text/javascript'>
/**
 * [x] ì—˜ë¦¬ë¨¼íŠ¸ì˜ .draggable, .containerì˜ ë°°ì—´ë¡œ ì„ íƒìë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
 * [x] draggablesë¥¼ ì „ì²´ë¥¼ ë£¨í”„í•˜ë©´ì„œ dragstart, dragendë¥¼ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
 * [x] dragstart, dragend ì´ë²¤íŠ¸ë¥¼ ë°œìƒí• ë•Œ .draggingë¼ëŠ” í´ë˜ìŠ¤ë¥¼ í† ê¸€ì‹œí‚¨ë‹¤.
 * [x] dragover ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ëŠ” ë™ì•ˆ ë§ˆìš°ìŠ¤ ë“œë˜ê·¸í•˜ê³  ë§ˆì§€ë§‰ ìœ„ì¹˜í•´ë†“ì€ Elementë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“­ë‹ˆë‹¤.
 */
(() => {
    const $ = (select) => document.querySelectorAll(select);
    const draggables = $('.ico_container .draggable');
    const containers = $('.ico_container');

    draggables.forEach(el => {
        el.addEventListener('dragstart', () => {
            el.classList.add('dragging');
        });

        el.addEventListener('dragend', () => {
            el.classList.remove('dragging')
        });
    });

    function getDragAfterElement(container, y) {
        const draggableElements = [...container.querySelectorAll('.ico_container .draggable:not(.dragging)')]

        return draggableElements.reduce((closest, child) => {
            const box = child.getBoundingClientRect() //í•´ë‹¹ ì—˜ë¦¬ë¨¼íŠ¸ì— topê°’, heightê°’ ë‹´ê²¨ì ¸ ìˆëŠ” ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ boxë³€ìˆ˜ì— í• ë‹¹
            const offset = y - box.top - box.height / 2 //ìˆ˜ì§ ì¢Œí‘œ - topê°’ - heightê°’ / 2ì˜ ì—°ì‚°ì„ í†µí•´ì„œ offsetë³€ìˆ˜ì— í• ë‹¹
            if (offset < 0 && offset > closest.offset) { // (ì˜ˆì™¸ ì²˜ë¦¬) 0 ì´í•˜ ì™€, ìŒì˜ ë¬´í•œëŒ€ ì‚¬ì´ì— ì¡°ê±´
                return { offset: offset, element: child } // Elementë¥¼ ë¦¬í„´
            } else {
                return closest
            }
        }, { offset: Number.NEGATIVE_INFINITY }).element
    };

    containers.forEach(container => {
        container.addEventListener('dragover', e => {
            e.preventDefault()
            const afterElement = getDragAfterElement(container, e.clientY);
            const draggable = document.querySelector('.dragging')
            // container.appendChild(draggable)
            container.insertBefore(draggable, afterElement)
        })
    });
})();
</script>
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

        <!-- code_area -->
        <div class="code_tit">ex</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">
<!-- 
dragstart ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ì—ì„œÂ e.dataTransfer.setDataë¡œ ì „ë‹¬í•  ë°ì´í„°ë¥¼ ì§€ì •í•´ì¤€ë‹¤.Â 
setDataëŠ” í‚¤-ê°’ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê¸° ë•Œë¬¸ì—, í‚¤ë§Œ ë‹¤ë¥´ë©´ ì—¬ëŸ¬ ê°œì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
dragoverì´ë²¤íŠ¸ì—ì„œëŠ”Â e.preventDefault()ë¡œ drop ì´ë²¤íŠ¸ê°€ í˜¸ì¶œë  ìˆ˜ ìˆê²Œ í•´ì£¼ê³ 
drop ì´ë²¤íŠ¸ì—ì„œÂ e.dataTransfer.getDataë¡œ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.
-->
<style type="text/css">
    .img_container {float:left;width:200px;height:300px;margin:0 10px;border:solid 10px #8B4513;}
</style>
<div class="img_container" ondrop="drop(event)" ondragover="dragEnter(event)">
    <img id="monalisa" width="180" height="280" src="https://tcpschool.com/examples/images/img_monalisa.png" draggable="true" ondragstart="drag(event)">
</div>
<div class="img_container" ondrop="drop(event)" ondragover="dragEnter(event)"></div>
<script>
function dragEnter(ev) {
    ev.preventDefault();
}
function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
}
function drop(ev) {
    ev.preventDefault();
    var data = ev.dataTransfer.getData("text");
    ev.target.appendChild(document.getElementById(data));
}
</script>
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

    </div>
    <!-- // code_wrap -->

    <!-- foot -->
    <script src="../include/foot.js"></script>
    <!-- // foot -->
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- head -->
    <script src="../include/head.js"></script>
    <!-- // head -->
    
    <title>dragdrop</title>
</head>
<body data-theme="light">

    <!-- code_wrap -->
    <div class="code_wrap">
        <h1>dragdrop</h1>

        <!-- code_area -->
        <div class="code_tit">description</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">

<!-- ì¶œì²˜ : https://inpa.tistory.com/entry/ë“œë˜ê·¸-ì•¤-ë“œë¡­-Drag-Drop-ê¸°ëŠ¥ -->
<!-- 
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dragstart_event
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/drag_event 
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dragenter_event
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dragover_event
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dragleave_event
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/drop_event
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dragend_event


<a>ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë“œë˜ê·¸ ê°€ëŠ¥


dragstart   1. ì‚¬ìš©ìê°€ ê°ì²´(object)ë¥¼ ë“œë˜ê·¸í•˜ë ¤ê³  ì‹œì‘í•  ë•Œ ë°œìƒí•¨.
            ë“œë˜ê·¸ê°€ ì‹œì‘ë˜ëŠ” ìˆœê°„ ë°œìƒ

drag        2. ëŒ€ìƒ ê°ì²´ë¥¼ ë“œë˜ê·¸í•˜ë©´ì„œ ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì¼ ë•Œ ë°œìƒí•¨.
            ìš”ì†Œë¥¼ ë“œë˜ê·¸í•  ë•Œ ë°œìƒ

dragenter   3. ë§ˆìš°ìŠ¤ê°€ ëŒ€ìƒ ê°ì²´ì˜ ìœ„ë¡œ ì²˜ìŒ ì§„ì…í•  ë•Œ ë°œìƒí•¨.
            í•´ë‹¹ ì´ë²¤íŠ¸ë¥¼ ì§€ì •í•œ ìš”ì†Œì— ë“œë˜ê·¸í•œ ì•„ì´í…œì´ ë“¤ì–´ê°€ë©´ ë°œìƒ
            ë“œë˜ê·¸í•˜ëŠ” ìš”ì†Œê°€ dragenter ì´ë²¤íŠ¸ë¥¼ ë‹¬ì•„ë†“ì€ ìš”ì†Œ ì•ˆì— ì§„ì…í–ˆì„ ë•Œ ë°œìƒ

dragover    4. ë“œë˜ê·¸í•˜ë©´ì„œ ë§ˆìš°ìŠ¤ê°€ ëŒ€ìƒ ê°ì²´ì˜ ì˜ì—­ ìœ„ì— ìë¦¬ ì¡ê³  ìˆì„ ë•Œ ë°œìƒí•¨.
            ì´ ì´ë²¤íŠ¸ê°€ ë‹¬ë¦° ì˜ì—­ ìœ„ì— ë“œë˜ê·¸ ìš”ì†Œê°€ ìˆìœ¼ë©´ ë°œìƒ

drop        5. ë“œë˜ê·¸ê°€ ëë‚˜ì„œ ë“œë˜ê·¸í•˜ë˜ ê°ì²´ë¥¼ ë†“ëŠ” ì¥ì†Œì— ìœ„ì¹˜í•œ ê°ì²´ì—ì„œ ë°œìƒí•¨. ë¦¬ìŠ¤ë„ˆëŠ” ë“œë˜ê·¸ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ë“œë¡­ ìœ„ì¹˜ì— ë†“ëŠ” ì—­í• ì„ í•¨
            ì´ ì´ë²¤íŠ¸ê°€ ë‹¬ë¦° ìš”ì†Œì— ë“œë˜ê·¸ë¥¼ ëë‚´ë©´ ë°œìƒ (dragoverë‘ ê°™ì´ ì¨ì•¼í•¨)
            drop ì´ë²¤íŠ¸ ì—­ì‹œ ë“œë¡­ë  ìš”ì†Œì—ëŠ” e.preventDefault()ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì •ìƒì ì¸ ë™ì‘ì´ ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œì´ë²¤íŠ¸ì—Â preventDefault()Â ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
            ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©í–ˆì„ ë•ŒëŠ” ë™ì‘ì„ í•˜ì§€ ì•Šì•˜ê³  dragoverì´ë²¤íŠ¸ì™€ í•¨ê»˜ ì‚¬ìš©í–ˆì„ ë•Œ ë¹„ë¡œì†Œ ë™ì‘ì´ ëœë‹¤.

dragleave   6. ë“œë˜ê·¸ê°€ ëë‚˜ì„œ ë§ˆìš°ìŠ¤ê°€ ëŒ€ìƒ ê°ì²´ì˜ ìœ„ì—ì„œ ë²—ì–´ë‚  ë•Œ ë°œìƒí•¨.
            dragexit ì´ë²¤íŠ¸ ëŒ€ì‹  ì‚¬ìš©.
            ì–´ë–¤ ìš”ì†Œë“  ë“œë˜ê·¸ë˜ê³  ìˆë‹¤ë©´ ì´ ì´ë²¤íŠ¸ê°€ ë‹¬ë¦° ìš”ì†Œì— ë“¤ì–´ê°”ë‹¤ê°€ ë‚˜ê°€ëŠ” ì‹œì ì— ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸
            dragenter ì´ë²¤íŠ¸ì™€ ë™ì‘ì´ ê²¹ì¹ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— e.preventDefault() ë¡œ ì œí•œí•˜ë©° ë‘˜ì´ ê²°í•©í•˜ì—¬ ì‚¬ìš©í•¨

dragend     7. ëŒ€ìƒ ê°ì²´ë¥¼ ë“œë˜ê·¸í•˜ë‹¤ê°€ ë§ˆìš°ìŠ¤ ë²„íŠ¼ì„ ë†“ëŠ” ìˆœê°„ ë°œìƒí•¨.
            ìš”ì†Œì˜ ë“œë˜ê·¸ê°€ ëë‚ ë•Œ ë°œìƒ(ë“œë˜ê·¸ ë„ì¤‘ì— ë§ˆìš°ìŠ¤ ë²„íŠ¼ì„ ì•„ë¬´ë°ë‚˜ ë†“ìœ¼ë©´)

drop, dragover ì´ë²¤íŠ¸ëŠ” í•„ìˆ˜ë¡œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ë²¤íŠ¸
dragover ì´ë²¤íŠ¸ë¥¼ ì ìš©í•˜ì§€ ì•Šìœ¼ë©´ drop ì´ë²¤íŠ¸ê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ

ê¸°ë³¸ì ìœ¼ë¡œ HTML ìš”ì†ŒëŠ” ë‹¤ë¥¸ ìš”ì†Œì˜ ìœ„ì— ìœ„ì¹˜í•  ìˆ˜ ì—†ë‹¤. 
ë”°ë¼ì„œ ë‹¤ë¥¸ ìš”ì†Œ ìœ„ì— ìœ„ì¹˜í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë†“ì¼ ì¥ì†Œì— ìˆëŠ” ìš”ì†Œì˜ ê¸°ë³¸ ë™ì‘ì„ ë§‰ì•„ì•¼ë§Œ í•œë‹¤. 
ì´ ì‘ì—…ì„ event.preventDefault() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ê°„ë‹¨íˆ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.


DataTransfer ê°ì²´
ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ë²¤íŠ¸ë¥¼ ìœ„í•œ ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë©”ì†Œë“œ(event listener method)ëŠ”Â DataTransfer ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
ì´ë ‡ê²Œ ë°˜í™˜ëœ DataTransfer ê°ì²´ëŠ”Â ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë™ì‘ì— ê´€í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë‹¤.Â 
event.dataTransfer
ë°ì´í„°ë¥¼ ì €ì¥ ë° ê°€ì ¸ì˜¤ê¸°, ì‚­ì œë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” í‘œì¤€ ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤.

event.dataTransfer.setData(format,data)
ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ í¬ë§· ë¬¸ìì—´ì„ ì§€ì •.
ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì— ì§€ì •í•œ í¬ë§·ê³¼ ì¼ì¹˜í•˜ëŠ” ê°’ì„ ë‘ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ì§€ì •.
ë‘ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œëŠ” ë¬¸ìì—´ë§Œ ì§€ì • ê°€ëŠ¥

event.dataTransfer.getData(format)
ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì— ì§€ì •í•œ í¬ë§·ì˜ ì „ì†¡ ë°ì´í„°ë¥¼ ë°˜í™˜.
ì§€ì •ëœ í¬ë§·ì˜ ë°ì´í„°ê°€ ì§€ì •ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ ê³µë°± ë¬¸ìì—´ì„ ë°˜í™˜

event.dataTransfer.clearData()
event.dataTransfer.clearData(format)
ë°ì´í„° ì „ì†¡ìš©ìœ¼ë¡œ ì§€ì •ëœ ë°ì´í„°ë¥¼ ëª¨ë‘ ì œê±°.
ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ í¬ë§· ë¬¸ìì—´ì„ ì§€ì •í•˜ë©´ í•´ë‹¹ í˜•ì‹ê³¼ ì¼ì¹˜í•˜ëŠ” ë°ì´í„°ë§Œì„ ì œê±°.

event.dataTransfer.types
dragstartÂ ì´ë²¤íŠ¸ ë°œìƒì‹œÂ DOMÂ ëª©ë¡ì— ìˆëŠ”Â data formatÂ ì„ ì„¤ì •í•˜ë©°
setDataÂ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí• ë•Œ ì§€ì •ë˜ëŠ”Â formatÂ ë¬¸ìì—´ì„ ë°°ì—´í˜•ì‹ìœ¼ë¡œ ì–»ì„ ìˆ˜ ìˆë‹¤.

ìš”ì†Œë¥¼ ë§ˆìš°ìŠ¤ë¡œ ë“œë˜ê·¸í•˜ë©´ ê·¸ ìš”ì†Œì˜ ëª¨ìŠµì´ ê³ ìŠ¤íŠ¸ ì´ë¯¸ì§€(ghost image) ë¡œì„œ ì»¤ì„œì— ë”¸ë ¤ ë‚˜ì˜¨ë‹¤. 
ì´ ë“œë˜ê·¸ ì´ë¯¸ì§€ë¥¼ DataTransfer.setDragImage() ë©”ì„œë“œë¥¼ í†µí•´ ì‚¬ìš©ì ì»¤ìŠ¤í…€ì´ ê°€ëŠ¥í•˜ë‹¤.
-->
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

        <!-- code_area -->
        <div class="code_tit">drag_drop (pc/mo)</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">
<style type="text/css">
    .drag_drop {overflow:hidden;width:100%;height:600px;background:#eee;user-select:none;}
    .drag_drop .item {width:200px;height:50px;background:#f0f;border:0;}
    .drag_drop .item.dragging {background:#f00;}
    .drag_drop .drag_box {display:flex;align-items:center;justify-content:center;width:100%;height:200px;background:#0ff;}
    .drag_drop .drag_box.dragover {background:#00f;}
    .drag_drop .drop_box {display:flex;align-items:center;justify-content:center;width:100%;height:300px;background:#ff0;}
    .drag_drop .drop_box.dragover {background:#0f0;}
</style>
<div class="drag_drop">
    <div class="drag_box">
        drag_box
        <button class="item image" draggable="true">item</button><!-- ë“œë˜ê·¸ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ìš”ì†Œì— draggable="true" ì¶”ê°€ -->
    </div>
    <div class="drop_box">
        drop_box
    </div>
</div>
<script type='text/javascript'>
    // item
    const item = document.querySelector('.drag_box .item');
    item.addEventListener('dragstart', (e) => {
        // e.preventDefault();
        e.target.classList.add("dragging");
        // console.log('ìš”ì†Œë¥¼ ë“œë˜ê·¸ë¥¼ ì‹œì‘í•˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');

        if (e.target.classList.contains('image')) {
            const img = document.createElement("img");
            img.src = "../../images/snoopy.png";
            // setDragImage(ì´ë¯¸ì§€ìš”ì†Œ, xOffset, yOffset)
            e.dataTransfer.setDragImage(img, 60, 80); // ì‚¬ìš©í•  ì‚¬ìš©ì ì •ì˜ ì´ë¯¸ì§€ë¥¼ ì„¤ì •
            // console.log('image');
        }
    }, false);

    item.addEventListener('drag', (e) => {
        // console.log(e.dataTransfer); // ë“œë˜ê·¸ ì´ë²¤íŠ¸ ì •ë³´ë¥¼ ë‹´ê³ ìˆëŠ” dataTransfer ê°ì²´
        // console.log('ë“œë˜ê·¸í•˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });

    item.addEventListener('dragend', (e) => {
        e.target.classList.remove("dragging");
        // console.log('ë“œë˜ê·¸ê°€ ëë‚˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });

    // dragBox, dropBox
    const dragBox = document.querySelector('.drag_drop .drag_box');
    const dropBox = document.querySelector('.drag_drop .drop_box');

    // dragBox
    dragBox.addEventListener('dragenter', (e) => {
        e.preventDefault();
        e.target.classList.add("dragover");
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drag_box ì˜ì—­ì— ë‹¿ìœ¼ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });

    dragBox.addEventListener('dragleave', (e) => {
        e.preventDefault();
        e.target.classList.remove("dragover");
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drag_box ì˜ì—­ì„ ë– ë‚˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });

    dragBox.addEventListener('dragover', (e) => {
        e.preventDefault();
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drag_box ì˜ì—­ì— ê³„ì† ìœ„ì¹˜í•˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });

    dragBox.addEventListener('drop', (e) => {
        e.preventDefault();
        if (!e.target.classList.contains('item') ) {
            dropBox.removeChild(item);
            e.target.appendChild(item);
        }        
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drag_box ì˜ì—­ì— ë“œë¡­');
    });

    // dropBox
    dropBox.addEventListener('dragenter', (e) => {
        e.target.classList.add("dragover");
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drop_box ì˜ì—­ì— ë‹¿ìœ¼ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });

    dropBox.addEventListener('dragleave', (e) => {
        e.preventDefault();
        e.target.classList.remove("dragover");
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drop_box ì˜ì—­ì„ ë– ë‚˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });

    dropBox.addEventListener('dragover', (e) => {
        e.preventDefault();
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drop_box ì˜ì—­ì— ê³„ì† ìœ„ì¹˜í•˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸');
    });
    
    dropBox.addEventListener('drop', (e) => {
        e.preventDefault();
        if (!e.target.classList.contains('item') ) {
            dragBox.removeChild(item);
            e.target.appendChild(item);
        }
        // console.log('ë“œë˜ê·¸ ìš”ì†Œê°€ drop_box ì˜ì—­ì— ë“œë¡­');
    });

    // í„°ì¹˜ ì´ë²¤íŠ¸ ì¶”ê°€
    let isDragging = false;

    // í„°ì¹˜ ì‹œì‘
    item.addEventListener('touchstart', (e) => {
        isDragging = true;
        e.target.classList.add("dragging");
        
        // í„°ì¹˜í•œ ìœ„ì¹˜ë¥¼ ê¸°ë¡
        const touch = e.touches[0];
        item.style.position = 'absolute';
        item.style.left = `${touch.clientX - item.offsetWidth / 2}px`;
        item.style.top = `${touch.clientY - item.offsetHeight / 2}px`;
    });

    // í„°ì¹˜ ì´ë™
    item.addEventListener('touchmove', (e) => {
        if (isDragging) {
            const touch = e.touches[0];
            item.style.left = `${touch.clientX - item.offsetWidth / 2}px`;
            item.style.top = `${touch.clientY - item.offsetHeight / 2}px`;
        }
    });

    // í„°ì¹˜ ì¢…ë£Œ
    item.addEventListener('touchend', (e) => {
        isDragging = false;
        e.target.classList.remove("dragging");

        // í„°ì¹˜ ì¢…ë£Œ ì‹œ ë“œë¡­ ìœ„ì¹˜ í™•ì¸
        const touch = e.changedTouches[0];
        const dropTarget = document.elementFromPoint(touch.clientX, touch.clientY);

        if (dropTarget === dropBox) {
            dragBox.removeChild(item);
            dropBox.appendChild(item);
        } else if (dropTarget === dragBox) {
            dropBox.removeChild(item);
            dragBox.appendChild(item);
        }

        // ì•„ì´í…œì„ ì´ˆê¸° ìœ„ì¹˜ë¡œ ë˜ëŒë¦¼
        item.style.position = 'relative';
        item.style.left = '0px';
        item.style.top = '0px';
    });

/*
touchstart ì´ë²¤íŠ¸: í„°ì¹˜ê°€ ì‹œì‘ë˜ë©´ touchstart ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ê³ , ì´ë•Œ dragging í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ë©°, ì•„ì´í…œì˜ ìœ„ì¹˜ë¥¼ í„°ì¹˜í•œ ê³³ìœ¼ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.
touchmove ì´ë²¤íŠ¸: í„°ì¹˜ê°€ ì´ë™í•  ë•Œ touchmove ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©°, í„°ì¹˜ ìœ„ì¹˜ì— ë”°ë¼ ì•„ì´í…œì„ ê³„ì† ì´ë™ì‹œí‚µë‹ˆë‹¤.
touchend ì´ë²¤íŠ¸: í„°ì¹˜ê°€ ì¢…ë£Œë˜ë©´ touchend ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ê³ , ë“œë˜ê·¸ê°€ ëë‚œ ìœ„ì¹˜ì—ì„œ ë“œë¡­ ìœ„ì¹˜ë¥¼ í™•ì¸í•œ í›„ í•´ë‹¹ ìœ„ì¹˜ì— ì•„ì´í…œì„ ì´ë™ì‹œí‚µë‹ˆë‹¤. ì•„ì´í…œ ìœ„ì¹˜ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
*/
</script>
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

        <!-- code_area -->
        <div class="code_tit">attach File (pc)</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">
<style type="text/css">
    .attach_file {position:relative;width:100%;height:200px;overflow:auto;display:flex;justify-content:center;align-items:center;flex-direction:column;border-radius:5px;border:4px dashed #ddd;text-align:center;user-select:none;transition:0.4s;}
    .attach_file .tit {position:absolute;left:0;top:50%;width:100%;font-size:20px;font-weight:600;transform:translateY(-50%);}
    .attach_file .file {position:relative;z-index:1;width:100%;height:100%;overflow-y:auto;padding:10px;font-size:12px;}
    .attach_file.active {background:#ddd;} /* ë“œë¡­ ë°˜ì‘ */
</style>
<div class="attach_file">
    <strong class="tit">ì´ê³³ì— íŒŒì¼ì„ (ì—¬ëŸ¬ê°œ) ë“œë¡­í•´ì£¼ì„¸ìš”. </strong>
    <div class="file"></div>
</div>
<script type='text/javascript'>
const $drop = document.querySelector(".attach_file");
const $title = document.querySelector(".attach_file .tit");
const $file = document.querySelector(".attach_file .file");

// ë“œë˜ê·¸í•œ íŒŒì¼ ê°ì²´ê°€ í•´ë‹¹ ì˜ì—­ì— ë†“ì˜€ì„ ë•Œ
$drop.ondrop = (e) => {
    e.preventDefault();
    $drop.className = "attach_file";

    // íŒŒì¼ ë¦¬ìŠ¤íŠ¸
    const files = [...e.dataTransfer?.files];
    // console.log(files);

    // $title.innerHTML = files.map(file => file.name).join("<br>");
    $title.remove();
    $file.innerHTML = files.map(file => file.name).join("<br>");
}

// ondragover ì´ë²¤íŠ¸ê°€ ì—†ìœ¼ë©´ onDrop ì´ë²¤íŠ¸ê°€ ì‹¤í•»ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
$drop.ondragover = (e) => {
    e.preventDefault();
}

// ë“œë˜ê·¸í•œ íŒŒì¼ì´ ìµœì´ˆë¡œ ì§„ì…í–ˆì„ ë•Œ
$drop.ondragenter = (e) => {
    e.preventDefault();

$drop.classList.add("active");
}

// ë“œë˜ê·¸í•œ íŒŒì¼ì´ ì˜ì—­ì„ ë²—ì–´ë‚¬ì„ ë•Œ
$drop.ondragleave = (e) => {
    e.preventDefault();

    $drop.classList.remove("active");
}
</script>
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

        <!-- code_area -->
        <div class="code_tit">data (pc/mo)</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">
<style type="text/css">
    #drag {padding:20px;background:#eee;font-size:20px;}
    #drop {padding:20px;background:#999;font-size:20px;}
</style>
<div>
    <p id="drag" draggable="true">ë“œë˜ê·¸í•´ë³´ì„¸ìš”.</p>
    <div id="drop">ì—¬ê¸°ì— ë“œë¡­í•˜ì„¸ìš”</div>
</div>
<script type='text/javascript'>
/*
dragstart ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ì—ì„œÂ e.dataTransfer.setDataë¡œ ì „ë‹¬í•  ë°ì´í„°ë¥¼ ì§€ì •í•´ì¤€ë‹¤.Â 
setDataëŠ” í‚¤-ê°’ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê¸° ë•Œë¬¸ì—, í‚¤ë§Œ ë‹¤ë¥´ë©´ ì—¬ëŸ¬ ê°œì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
dragoverì´ë²¤íŠ¸ì—ì„œëŠ”Â e.preventDefault()ë¡œ drop ì´ë²¤íŠ¸ê°€ í˜¸ì¶œë  ìˆ˜ ìˆê²Œ í•´ì£¼ê³ 
drop ì´ë²¤íŠ¸ì—ì„œÂ e.dataTransfer.getDataë¡œ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.
*/

// ë°ìŠ¤í¬íƒ‘ìš© ë“œë˜ê·¸ ì´ë²¤íŠ¸
document.getElementById('drag').ondragstart = function(e) {
    console.log('ë“œë˜ê·¸ ì‹œì‘');
    e.dataTransfer.setData('data', this.innerHTML);
    e.dataTransfer.dropEffect = 'copy';
};

var drop = document.getElementById('drop');
drop.ondragover = function(e) {
    e.preventDefault(); // í•„ìˆ˜
    console.log('ë¬´ì–¸ê°€ ìœ„ì— ì˜¬ë ¤ì ¸ ìˆìŠµë‹ˆë‹¤');
    e.dataTransfer.dropEffect = 'move';
};

drop.ondrop = function(e) {
    console.log('ë¬´ì–¸ê°€ ë“œë¡­ë˜ì—ˆìŠµë‹ˆë‹¤.');
    alert(e.dataTransfer.getData('data'));
}

// í„°ì¹˜ ì´ë²¤íŠ¸ë¥¼ ìœ„í•œ ì¶”ê°€ ì½”ë“œ
var drag = document.getElementById('drag');
var isDragging = false; // ë“œë˜ê·¸ ì—¬ë¶€ í™•ì¸ ë³€ìˆ˜

// í„°ì¹˜ ì‹œì‘
drag.addEventListener('touchstart', function(e) {
    isDragging = true;
    console.log('í„°ì¹˜ ì‹œì‘');
    
    // í„°ì¹˜í•œ ìœ„ì¹˜ë¥¼ ê¸°ë¡
    const touch = e.touches[0];
    drag.style.position = 'absolute';
    drag.style.left = `${touch.clientX - drag.offsetWidth / 2}px`;
    drag.style.top = `${touch.clientY - drag.offsetHeight / 2}px`;
});

// í„°ì¹˜ ì´ë™
drag.addEventListener('touchmove', function(e) {
    if (isDragging) {
        console.log('í„°ì¹˜ ì´ë™');
        const touch = e.touches[0];
        drag.style.left = `${touch.clientX - drag.offsetWidth / 2}px`;
        drag.style.top = `${touch.clientY - drag.offsetHeight / 2}px`;
    }
});

// í„°ì¹˜ ì¢…ë£Œ
drag.addEventListener('touchend', function(e) {
    if (isDragging) {
        console.log('í„°ì¹˜ ì¢…ë£Œ');
        isDragging = false;

        // í„°ì¹˜ ì¢…ë£Œ ì‹œ ë“œë¡­ ìœ„ì¹˜ í™•ì¸
        const touch = e.changedTouches[0];
        const dropTarget = document.elementFromPoint(touch.clientX, touch.clientY);

        // ë“œë¡­ ëŒ€ìƒì´ drop ì˜ì—­ì¸ì§€ í™•ì¸
        if (dropTarget === drop) {
            console.log('drop ì˜ì—­ì— ë“œë¡­ë¨');
            alert(drag.innerHTML);
        } else {
            console.log('drop ì˜ì—­ì´ ì•„ë‹˜');
        }

        // ì•„ì´í…œì„ ì´ˆê¸° ìœ„ì¹˜ë¡œ ë˜ëŒë¦¼
        drag.style.position = 'relative';
        drag.style.left = '0px';
        drag.style.top = '0px';
    }
});

/*
í„°ì¹˜ ì‹œì‘ (touchstart): ì‚¬ìš©ìê°€ ì•„ì´í…œì„ í„°ì¹˜í•  ë•Œ ë“œë˜ê·¸ ìƒíƒœë¥¼ trueë¡œ ì„¤ì •í•˜ê³ , í„°ì¹˜ ìœ„ì¹˜ì— ë”°ë¼ ì•„ì´í…œì„ ì´ë™ì‹œí‚µë‹ˆë‹¤.
í„°ì¹˜ ì´ë™ (touchmove): í„°ì¹˜ê°€ ì´ë™í•  ë•Œ ì•„ì´í…œì´ í•¨ê»˜ ì´ë™í•˜ë„ë¡ í•©ë‹ˆë‹¤.
í„°ì¹˜ ì¢…ë£Œ (touchend): í„°ì¹˜ê°€ ì¢…ë£Œë˜ë©´ ì•„ì´í…œì´ drop ì˜ì—­ì— ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ë“œë¡­ë˜ì—ˆì„ ê²½ìš°ì—ëŠ” alertë¥¼ ë„ì›ë‹ˆë‹¤. ì´í›„ ì•„ì´í…œì„ ì´ˆê¸° ìœ„ì¹˜ë¡œ ë˜ëŒë¦½ë‹ˆë‹¤.
*/
</script>
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

        <!-- code_area -->
        <div class="code_tit">draggable item</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">
<style type="text/css">
    .container {height:120px;margin:10px;padding:10px;background-color:green;border-radius:8px;}
    .container button {width:70px;height:70px;border:none;border-radius:8px;margin:12px;cursor:move;font-size:30px;background:#eaeaea4f;}
    .container .draggable.dragging {opacity:0.5;}
</style>
<div class="container">
    <button class="draggable" draggable="true">ğŸ¦Š</button>
    <button class="draggable" draggable="true">ğŸ¸</button>
</div>
<div class="container">
    <button class="draggable" draggable="true">ğŸ¶</button>
    <button class="draggable" draggable="true">ğŸ±</button>
</div>
<script type='text/javascript'>
/*
dragstart ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ì—ì„œÂ e.dataTransfer.setDataë¡œ ì „ë‹¬í•  ë°ì´í„°ë¥¼ ì§€ì •í•´ì¤€ë‹¤.Â 
setDataëŠ” í‚¤-ê°’ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê¸° ë•Œë¬¸ì—, í‚¤ë§Œ ë‹¤ë¥´ë©´ ì—¬ëŸ¬ ê°œì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
dragoverì´ë²¤íŠ¸ì—ì„œëŠ”Â e.preventDefault()ë¡œ drop ì´ë²¤íŠ¸ê°€ í˜¸ì¶œë  ìˆ˜ ìˆê²Œ í•´ì£¼ê³ 
drop ì´ë²¤íŠ¸ì—ì„œÂ e.dataTransfer.getDataë¡œ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.
*/

const draggables = document.querySelectorAll(".draggable");
const containers = document.querySelectorAll(".container");

// ë°ìŠ¤í¬íƒ‘ìš© ë“œë˜ê·¸ ì´ë²¤íŠ¸
draggables.forEach(draggable => {
    draggable.addEventListener("dragstart", () => {
        draggable.classList.add("dragging");
    });

    draggable.addEventListener("dragend", () => {
        draggable.classList.remove("dragging");
    });
});

containers.forEach(container => {
    container.addEventListener("dragover", e => {
        e.preventDefault();
        const afterElement = getDragAfterElement(container, e.clientX);
        const draggable = document.querySelector(".dragging");
        if (afterElement === undefined) {
            container.appendChild(draggable);
        } else {
            container.insertBefore(draggable, afterElement);
        }
    });
});

function getDragAfterElement(container, x) {
    const draggableElements = [
        ...container.querySelectorAll(".draggable:not(.dragging)"),
    ];

    return draggableElements.reduce(
        (closest, child) => {
            const box = child.getBoundingClientRect();
            const offset = x - box.left - box.width / 2;
            // console.log(offset);
            if (offset < 0 && offset > closest.offset) {
                return { offset: offset, element: child };
            } else {
                return closest;
            }
        },
        { offset: Number.NEGATIVE_INFINITY },
    ).element;
}

// ëª¨ë°”ì¼ í„°ì¹˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì¶”ê°€
draggables.forEach(draggable => {
    let isDragging = false; // í„°ì¹˜ ë“œë˜ê·¸ ìƒíƒœ ë³€ìˆ˜

    // í„°ì¹˜ ì‹œì‘
    draggable.addEventListener("touchstart", (e) => {
        isDragging = true;
        draggable.classList.add("dragging");

        // í„°ì¹˜í•œ ìœ„ì¹˜ì— ë”°ë¼ ìš”ì†Œì˜ ì´ë™ ì‹œì‘
        const touch = e.touches[0];
        draggable.style.position = 'absolute';
        draggable.style.left = `${touch.clientX - draggable.offsetWidth / 2}px`;
        draggable.style.top = `${touch.clientY - draggable.offsetHeight / 2}px`;
    });

    // í„°ì¹˜ ì´ë™
    draggable.addEventListener("touchmove", (e) => {
        if (isDragging) {
            const touch = e.touches[0];
            draggable.style.left = `${touch.clientX - draggable.offsetWidth / 2}px`;
            draggable.style.top = `${touch.clientY - draggable.offsetHeight / 2}px`;

            // ë“œë˜ê·¸ ì¤‘ê°„ ìƒíƒœë¥¼ ì²´í¬í•˜ì—¬ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ì•„ì´í…œ ìœ„ì¹˜ ê³„ì‚°
            containers.forEach(container => {
                const afterElement = getDragAfterElement(container, touch.clientX);
                if (container.contains(draggable)) {
                    if (afterElement === undefined) {
                        container.appendChild(draggable);
                    } else {
                        container.insertBefore(draggable, afterElement);
                    }
                }
            });
        }
    });

    // í„°ì¹˜ ì¢…ë£Œ
    draggable.addEventListener("touchend", () => {
        isDragging = false;
        draggable.classList.remove("dragging");

        // ìš”ì†Œ ìœ„ì¹˜ë¥¼ ì´ˆê¸°í™” (ìƒëŒ€ ìœ„ì¹˜ì—ì„œ ì›ë˜ ìœ„ì¹˜ë¡œ)
        draggable.style.position = 'relative';
        draggable.style.left = '0px';
        draggable.style.top = '0px';
    });
});

// ê¸°ì¡´ getDragAfterElement í•¨ìˆ˜
function getDragAfterElement(container, x) {
    const draggableElements = [
        ...container.querySelectorAll(".draggable:not(.dragging)"),
    ];

    return draggableElements.reduce(
        (closest, child) => {
            const box = child.getBoundingClientRect();
            const offset = x - box.left - box.width / 2;
            if (offset < 0 && offset > closest.offset) {
                return { offset: offset, element: child };
            } else {
                return closest;
            }
        },
        { offset: Number.NEGATIVE_INFINITY },
    ).element;
}

/*
í„°ì¹˜ ì‹œì‘ (touchstart): í„°ì¹˜ê°€ ì‹œì‘ë˜ë©´, isDragging ë³€ìˆ˜ë¥¼ trueë¡œ ì„¤ì •í•˜ê³ , ì•„ì´í…œì˜ ìœ„ì¹˜ë¥¼ í„°ì¹˜í•œ ìœ„ì¹˜ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.
í„°ì¹˜ ì´ë™ (touchmove): í„°ì¹˜ê°€ ì´ë™í•  ë•Œë§ˆë‹¤ ì•„ì´í…œì„ ë”°ë¼ ì›€ì§ì´ê²Œ í•˜ê³ , ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ë‹¤ë¥¸ ìš”ì†Œì™€ì˜ ìœ„ì¹˜ë¥¼ ê³„ì‚°í•˜ì—¬ ë“œë˜ê·¸ ìœ„ì¹˜ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
í„°ì¹˜ ì¢…ë£Œ (touchend): í„°ì¹˜ê°€ ì¢…ë£Œë˜ë©´ isDragging ë³€ìˆ˜ë¥¼ falseë¡œ ì„¤ì •í•˜ê³ , ì•„ì´í…œì˜ ìœ„ì¹˜ë¥¼ ì´ˆê¸°í™”í•˜ì—¬ ì›ë˜ ìœ„ì¹˜ë¡œ ë˜ëŒë¦½ë‹ˆë‹¤.
*/
</script>
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

        <!-- code_area -->
        <div class="code_tit">draggable list (pc/mo)</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">
<!-- 
dragstart ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ì—ì„œÂ e.dataTransfer.setDataë¡œ ì „ë‹¬í•  ë°ì´í„°ë¥¼ ì§€ì •í•´ì¤€ë‹¤.Â 
setDataëŠ” í‚¤-ê°’ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê¸° ë•Œë¬¸ì—, í‚¤ë§Œ ë‹¤ë¥´ë©´ ì—¬ëŸ¬ ê°œì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
dragoverì´ë²¤íŠ¸ì—ì„œëŠ”Â e.preventDefault()ë¡œ drop ì´ë²¤íŠ¸ê°€ í˜¸ì¶œë  ìˆ˜ ìˆê²Œ í•´ì£¼ê³ 
drop ì´ë²¤íŠ¸ì—ì„œÂ e.dataTransfer.getDataë¡œ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.
-->
<style type="text/css">
    .ico_container {padding:20px;background:#f1f1f1;border:1px solid #ccc;}
    .ico_container .draggable {display:flex;justify-content:center;align-items:center;height:40px;background:#f7f7f7;border:1px solid #ccc;font-size:20px;line-height:40px;cursor:move;}
    .ico_container .draggable + .draggable {margin-top:-1px;}
    .ico_container .draggable.dragging {opacity:.5;border:2px dashed red;}
    .ico_container + .ico_container {margin-top:10px;}
</style>
<div class="ico_container">
    <div class="draggable" draggable="true">
        <span class="ico-drag"></span>
        <div class="el">HTML</div>
    </div>
    <div class="draggable" draggable="true">
        <span class="ico-drag"></span>    
        <div class="el">CSS</div>
    </div>
    <div class="draggable" draggable="true">
        <span class="ico-drag"></span>
        <div class="el">JavaScript</div>
    </div>
</div>
<div class="ico_container">
    <div class="draggable" draggable="true">
        <span class="ico-drag"></span>
        <div class="el">React</div>
    </div>
    <div class="draggable" draggable="true">
        <span class="ico-drag"></span>
        <div class="el">Vue</div>
    </div>
    <div class="draggable" draggable="true">
        <span class="ico-drag"></span>
        <div class="el">Next JS</div>
    </div>
</div>
<script type='text/javascript'>
/*
ì—˜ë¦¬ë¨¼íŠ¸ì˜ .draggable, .containerì˜ ë°°ì—´ë¡œ ì„ íƒìë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
draggablesë¥¼ ì „ì²´ë¥¼ ë£¨í”„í•˜ë©´ì„œ dragstart, dragendë¥¼ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
dragstart, dragend ì´ë²¤íŠ¸ë¥¼ ë°œìƒí• ë•Œ .draggingë¼ëŠ” í´ë˜ìŠ¤ë¥¼ í† ê¸€ì‹œí‚¨ë‹¤.
dragover ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ëŠ” ë™ì•ˆ ë§ˆìš°ìŠ¤ ë“œë˜ê·¸í•˜ê³  ë§ˆì§€ë§‰ ìœ„ì¹˜í•´ë†“ì€ Elementë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“­ë‹ˆë‹¤.
*/

(() => {
    const $ = (select) => document.querySelectorAll(select);
    const draggables = $('.ico_container .draggable');
    const containers = $('.ico_container');

    // ë°ìŠ¤í¬íƒ‘ìš© ë“œë˜ê·¸ ì´ë²¤íŠ¸ ì²˜ë¦¬
    draggables.forEach(el => {
        el.addEventListener('dragstart', () => {
            el.classList.add('dragging');
        });

        el.addEventListener('dragend', () => {
            el.classList.remove('dragging')
        });
    });

    // ìš”ì†Œ ë“œë˜ê·¸ í›„ ìœ„ì¹˜ ê³„ì‚° í•¨ìˆ˜
    function getDragAfterElement(container, y) {
        const draggableElements = [...container.querySelectorAll('.ico_container .draggable:not(.dragging)')]

        return draggableElements.reduce((closest, child) => {
            const box = child.getBoundingClientRect() // í•´ë‹¹ ì—˜ë¦¬ë¨¼íŠ¸ì— topê°’, heightê°’ ë‹´ê²¨ì ¸ ìˆëŠ” ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ boxë³€ìˆ˜ì— í• ë‹¹
            const offset = y - box.top - box.height / 2 // ìˆ˜ì§ ì¢Œí‘œ - topê°’ - heightê°’ / 2ì˜ ì—°ì‚°ì„ í†µí•´ì„œ offsetë³€ìˆ˜ì— í• ë‹¹
            if (offset < 0 && offset > closest.offset) { // (ì˜ˆì™¸ ì²˜ë¦¬) 0 ì´í•˜ ì™€, ìŒì˜ ë¬´í•œëŒ€ ì‚¬ì´ì— ì¡°ê±´
                return { offset: offset, element: child } // Elementë¥¼ ë¦¬í„´
            } else {
                return closest
            }
        }, { offset: Number.NEGATIVE_INFINITY }).element
    };

    // ë“œë˜ê·¸ì˜¤ë²„ ì´ë²¤íŠ¸ ì²˜ë¦¬
    containers.forEach(container => {
        container.addEventListener('dragover', e => {
            e.preventDefault()
            const afterElement = getDragAfterElement(container, e.clientY);
            const draggable = document.querySelector('.dragging')
            // container.appendChild(draggable)
            container.insertBefore(draggable, afterElement)
        })
    });

    // ëª¨ë°”ì¼ í„°ì¹˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì¶”ê°€
    draggables.forEach(draggable => {
        let isDragging = false; // í„°ì¹˜ ë“œë˜ê·¸ ìƒíƒœ ë³€ìˆ˜
        let startY = 0;

        // í„°ì¹˜ ì‹œì‘
        draggable.addEventListener('touchstart', (e) => {
            isDragging = true;
            startY = e.touches[0].clientY;
            draggable.classList.add('dragging');
        });

        // í„°ì¹˜ ì´ë™
        draggable.addEventListener('touchmove', (e) => {
            if (!isDragging) return;

            const currentY = e.touches[0].clientY;
            const container = [...containers].find(container => container.contains(draggable));

            if (container) {
                const afterElement = getDragAfterElement(container, currentY);
                if (afterElement === undefined) {
                    container.appendChild(draggable);
                } else {
                    container.insertBefore(draggable, afterElement);
                }
            }

            // í„°ì¹˜ ì‹œ ìœ„ì¹˜ ë³€ê²½ì„ ìœ„í•´ preventDefault() í˜¸ì¶œ
            e.preventDefault();
        });

        // í„°ì¹˜ ì¢…ë£Œ
        draggable.addEventListener('touchend', () => {
            isDragging = false;
            draggable.classList.remove('dragging');
        });
    });
})();

/*
í„°ì¹˜ ì‹œì‘ (touchstart): í„°ì¹˜ê°€ ì‹œì‘ë˜ë©´ isDragging ë³€ìˆ˜ë¥¼ trueë¡œ ì„¤ì •í•˜ê³ , í„°ì¹˜ ì‹œì‘ ìœ„ì¹˜ë¥¼ ê¸°ë¡í•˜ë©°, ë“œë˜ê·¸ ì¤‘ì´ë¼ëŠ” í‘œì‹œë¥¼ ìœ„í•´ .dragging í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
í„°ì¹˜ ì´ë™ (touchmove): í„°ì¹˜ê°€ ì´ë™í•  ë•Œë§ˆë‹¤ í˜„ì¬ í„°ì¹˜ ìœ„ì¹˜(currentY)ë¥¼ ê³„ì‚°í•˜ê³ , getDragAfterElement í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•„ì´í…œì„ ìƒˆë¡œìš´ ìœ„ì¹˜ì— ì‚½ì…í•©ë‹ˆë‹¤. e.preventDefault()ë¥¼ í˜¸ì¶œí•˜ì—¬ ê¸°ë³¸ í„°ì¹˜ ìŠ¤í¬ë¡¤ ë™ì‘ì„ ë°©ì§€í•©ë‹ˆë‹¤.
í„°ì¹˜ ì¢…ë£Œ (touchend): í„°ì¹˜ê°€ ì¢…ë£Œë˜ë©´ ë“œë˜ê·¸ ìƒíƒœë¥¼ falseë¡œ ì„¤ì •í•˜ê³ , .dragging í´ë˜ìŠ¤ë¥¼ ì œê±°í•˜ì—¬ ë“œë˜ê·¸ ìƒíƒœë¥¼ í•´ì œí•©ë‹ˆë‹¤.
*/
</script>
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

        <!-- code_area -->
        <div class="code_tit">draggable img (pc/mo)</div>
        <div class="code_area" data-style="vertical">
            <!-- code_ui -->
            <div class="code_ui">
                <div class="code_ui_box">
<style type="text/css">
    .img_container {float:left;width:200px;height:300px;margin:0 10px;border:solid 10px #8B4513;}
</style>
<div class="img_container" ondrop="drop(event)" ondragover="dragEnter(event)">
    <img id="monalisa" width="180" height="280" src="https://tcpschool.com/examples/images/img_monalisa.png" draggable="true" ondragstart="drag(event)">
</div>
<div class="img_container" ondrop="drop(event)" ondragover="dragEnter(event)"></div>
<script>
/*
dragstart ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ì—ì„œÂ e.dataTransfer.setDataë¡œ ì „ë‹¬í•  ë°ì´í„°ë¥¼ ì§€ì •í•´ì¤€ë‹¤.Â 
setDataëŠ” í‚¤-ê°’ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê¸° ë•Œë¬¸ì—, í‚¤ë§Œ ë‹¤ë¥´ë©´ ì—¬ëŸ¬ ê°œì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
dragoverì´ë²¤íŠ¸ì—ì„œëŠ”Â e.preventDefault()ë¡œ drop ì´ë²¤íŠ¸ê°€ í˜¸ì¶œë  ìˆ˜ ìˆê²Œ í•´ì£¼ê³ 
drop ì´ë²¤íŠ¸ì—ì„œÂ e.dataTransfer.getDataë¡œ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.
*/

// ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê¸°ëŠ¥ì„ ìœ„í•œ JavaScript ì½”ë“œ

// dragover ì´ë²¤íŠ¸ì—ì„œ drop ì´ë²¤íŠ¸ê°€ í˜¸ì¶œë  ìˆ˜ ìˆë„ë¡ ë°©ì§€í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
function dragEnter(ev) {
    ev.preventDefault();
}

// ë“œë˜ê·¸ ì‹œì‘ ì‹œ ë°ì´í„°ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
}

// ë“œë¡­ ì‹œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ í•´ë‹¹ ìš”ì†Œë¥¼ ì´ë™í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
function drop(ev) {
    ev.preventDefault();
    var data = ev.dataTransfer.getData("text");
    ev.target.appendChild(document.getElementById(data));
}

// ëª¨ë°”ì¼ í„°ì¹˜ ì´ë²¤íŠ¸ë¥¼ ìœ„í•œ ë³€ìˆ˜
let currentDraggedElement = null;
let initialX, initialY;

// í„°ì¹˜ ì‹œì‘ ì‹œ ë“œë˜ê·¸ ì‹œì‘ ì´ë²¤íŠ¸ì™€ ë¹„ìŠ·í•˜ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
function touchStart(ev) {
    currentDraggedElement = ev.target;  // í„°ì¹˜í•œ ìš”ì†Œë¥¼ ì €ì¥
    initialX = ev.touches[0].clientX;    // í„°ì¹˜í•œ ìœ„ì¹˜ì˜ Xì¢Œí‘œ ì €ì¥
    initialY = ev.touches[0].clientY;    // í„°ì¹˜í•œ ìœ„ì¹˜ì˜ Yì¢Œí‘œ ì €ì¥
}

// í„°ì¹˜ ì´ë™ ì‹œ ìš”ì†Œë¥¼ ë”°ë¼ë‹¤ë‹ˆë„ë¡ í•©ë‹ˆë‹¤.
function touchMove(ev) {
    ev.preventDefault();
    
    // í„°ì¹˜ ì´ë™ ì‹œ ìœ„ì¹˜ ê³„ì‚°
    let currentX = ev.touches[0].clientX;
    let currentY = ev.touches[0].clientY;

    // ì´ë™ì— ë”°ë¼ ì´ë¯¸ì§€ì˜ ìœ„ì¹˜ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
    currentDraggedElement.style.position = "absolute";
    currentDraggedElement.style.left = currentX - initialX + "px";
    currentDraggedElement.style.top = currentY - initialY + "px";
}

// í„°ì¹˜ ì¢…ë£Œ ì‹œ ë“œë¡­ ì´ë²¤íŠ¸ì™€ ìœ ì‚¬í•œ ë™ì‘ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
function touchEnd(ev) {
    let dropZone = document.elementFromPoint(ev.changedTouches[0].clientX, ev.changedTouches[0].clientY);
    if (dropZone && dropZone.classList.contains("img_container")) {
        if (!dropZone.querySelector("img")) {
            dropZone.appendChild(currentDraggedElement);
            currentDraggedElement.style.position = "static"; // ìœ„ì¹˜ ì´ˆê¸°í™”
        }
    }
    currentDraggedElement = null;  // ë“œë˜ê·¸ ì¢…ë£Œ í›„ ì´ˆê¸°í™”
}

/*
í„°ì¹˜ ì‹œì‘(touchstart): touchStart í•¨ìˆ˜ì—ì„œ í„°ì¹˜ ì‹œì‘ ì‹œ í˜„ì¬ í„°ì¹˜ëœ ìš”ì†Œì™€ ì´ˆê¸° í„°ì¹˜ ìœ„ì¹˜ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.
í„°ì¹˜ ì´ë™(touchmove): touchMove í•¨ìˆ˜ì—ì„œ ì‚¬ìš©ìê°€ í„°ì¹˜í•˜ê³  ìˆëŠ” ë™ì•ˆ ì´ë¯¸ì§€ê°€ ë”°ë¼ë‹¤ë‹ˆë„ë¡ ìœ„ì¹˜ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. e.preventDefault()ë¥¼ ì‚¬ìš©í•´ ê¸°ë³¸ í„°ì¹˜ ë™ì‘(ìŠ¤í¬ë¡¤)ì„ ë°©ì§€í•©ë‹ˆë‹¤.
í„°ì¹˜ ì¢…ë£Œ(touchend): touchEnd í•¨ìˆ˜ì—ì„œ í„°ì¹˜ê°€ ì¢…ë£Œë˜ì—ˆì„ ë•Œ í„°ì¹˜ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë“œë¡­í•  ìœ„ì¹˜ë¥¼ ì°¾ìŠµë‹ˆë‹¤. ë“œë¡­í•  ìœ„ì¹˜ê°€ img_container ìš”ì†Œì´ê³ , í•´ë‹¹ ìš”ì†Œì— ì´ë¯¸ ì´ë¯¸ì§€ê°€ ì—†ë‹¤ë©´ ë“œë˜ê·¸ëœ ì´ë¯¸ì§€ë¥¼ ê·¸ ìœ„ì¹˜ì— ì´ë™ì‹œí‚µë‹ˆë‹¤.
*/
</script>
                </div>
            </div>
            <!-- // code_ui -->
            <!-- code_view -->
            <div class="code_view"><div class="code_view_box"><textarea class="code_preview"></textarea></div></div>
            <!-- // code_view -->
        </div>
        <!-- // code_area -->

    </div>
    <!-- // code_wrap -->

    <!-- foot -->
    <script src="../include/foot.js"></script>
    <!-- // foot -->
</body>
</html>